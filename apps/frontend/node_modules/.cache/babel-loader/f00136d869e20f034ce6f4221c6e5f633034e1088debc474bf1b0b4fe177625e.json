{"ast":null,"code":"// Dummy service for dashboard data and pickup request\nexport async function fetchDashboardData() {\n  var _recentActivity$find;\n  const token = localStorage.getItem('token');\n  // Fetch recent activity and compute simple totals client-side for now\n  const res = await fetch('/api/resident/recent-activity', {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  });\n  if (!res.ok) {\n    // Graceful fallback for unauthenticated or server issues\n    return {\n      totalWaste: 0,\n      nextPickupDate: null,\n      pendingPickups: 0,\n      recentActivity: []\n    };\n  }\n  const recentActivity = await res.json();\n  const totalWaste = recentActivity.reduce((sum, r) => sum + (r.weight || 0), 0);\n  const pendingPickups = recentActivity.filter(r => String(r.status).toLowerCase() !== 'completed').length;\n  const nextPickupDate = ((_recentActivity$find = recentActivity.find(r => String(r.status).toLowerCase() === 'scheduled')) === null || _recentActivity$find === void 0 ? void 0 : _recentActivity$find.date) || null;\n  return {\n    totalWaste,\n    nextPickupDate,\n    pendingPickups,\n    recentActivity\n  };\n}\nexport async function requestPickup(formData) {\n  const token = localStorage.getItem('token');\n  const res = await fetch('/api/resident/pickup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    },\n    body: JSON.stringify(formData)\n  });\n  if (!res.ok) {\n    const err = await res.json().catch(() => ({}));\n    return {\n      error: err.message || 'Failed to schedule pickup'\n    };\n  }\n  return await res.json();\n}","map":{"version":3,"names":["fetchDashboardData","_recentActivity$find","token","localStorage","getItem","res","fetch","headers","ok","totalWaste","nextPickupDate","pendingPickups","recentActivity","json","reduce","sum","r","weight","filter","String","status","toLowerCase","length","find","date","requestPickup","formData","method","body","JSON","stringify","err","catch","error","message"],"sources":["C:/Users/HP/OneDrive/Documents/GitHub/EcoCollect/apps/frontend/src/services/residentApi.js"],"sourcesContent":["// Dummy service for dashboard data and pickup request\r\nexport async function fetchDashboardData() {\r\n  const token = localStorage.getItem('token');\r\n  // Fetch recent activity and compute simple totals client-side for now\r\n  const res = await fetch('/api/resident/recent-activity', {\r\n    headers: { 'Authorization': `Bearer ${token}` }\r\n  });\r\n  if (!res.ok) {\r\n    // Graceful fallback for unauthenticated or server issues\r\n    return { totalWaste: 0, nextPickupDate: null, pendingPickups: 0, recentActivity: [] };\r\n  }\r\n  const recentActivity = await res.json();\r\n  const totalWaste = recentActivity.reduce((sum, r) => sum + (r.weight || 0), 0);\r\n  const pendingPickups = recentActivity.filter(r => String(r.status).toLowerCase() !== 'completed').length;\r\n  const nextPickupDate = recentActivity.find(r => String(r.status).toLowerCase() === 'scheduled')?.date || null;\r\n  return { totalWaste, nextPickupDate, pendingPickups, recentActivity };\r\n}\r\n\r\nexport async function requestPickup(formData) {\r\n  const token = localStorage.getItem('token');\r\n  const res = await fetch('/api/resident/pickup', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify(formData)\r\n  });\r\n  if (!res.ok) {\r\n    const err = await res.json().catch(() => ({}));\r\n    return { error: err.message || 'Failed to schedule pickup' };\r\n  }\r\n  return await res.json();\r\n}\r\n"],"mappings":"AAAA;AACA,OAAO,eAAeA,kBAAkBA,CAAA,EAAG;EAAA,IAAAC,oBAAA;EACzC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;IACvDC,OAAO,EAAE;MAAE,eAAe,EAAE,UAAUL,KAAK;IAAG;EAChD,CAAC,CAAC;EACF,IAAI,CAACG,GAAG,CAACG,EAAE,EAAE;IACX;IACA,OAAO;MAAEC,UAAU,EAAE,CAAC;MAAEC,cAAc,EAAE,IAAI;MAAEC,cAAc,EAAE,CAAC;MAAEC,cAAc,EAAE;IAAG,CAAC;EACvF;EACA,MAAMA,cAAc,GAAG,MAAMP,GAAG,CAACQ,IAAI,CAAC,CAAC;EACvC,MAAMJ,UAAU,GAAGG,cAAc,CAACE,MAAM,CAAC,CAACC,GAAG,EAAEC,CAAC,KAAKD,GAAG,IAAIC,CAAC,CAACC,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;EAC9E,MAAMN,cAAc,GAAGC,cAAc,CAACM,MAAM,CAACF,CAAC,IAAIG,MAAM,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,WAAW,CAAC,CAAC,KAAK,WAAW,CAAC,CAACC,MAAM;EACxG,MAAMZ,cAAc,GAAG,EAAAT,oBAAA,GAAAW,cAAc,CAACW,IAAI,CAACP,CAAC,IAAIG,MAAM,CAACH,CAAC,CAACI,MAAM,CAAC,CAACC,WAAW,CAAC,CAAC,KAAK,WAAW,CAAC,cAAApB,oBAAA,uBAAxEA,oBAAA,CAA0EuB,IAAI,KAAI,IAAI;EAC7G,OAAO;IAAEf,UAAU;IAAEC,cAAc;IAAEC,cAAc;IAAEC;EAAe,CAAC;AACvE;AAEA,OAAO,eAAea,aAAaA,CAACC,QAAQ,EAAE;EAC5C,MAAMxB,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,sBAAsB,EAAE;IAC9CqB,MAAM,EAAE,MAAM;IACdpB,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,UAAUL,KAAK;IAClC,CAAC;IACD0B,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ;EAC/B,CAAC,CAAC;EACF,IAAI,CAACrB,GAAG,CAACG,EAAE,EAAE;IACX,MAAMuB,GAAG,GAAG,MAAM1B,GAAG,CAACQ,IAAI,CAAC,CAAC,CAACmB,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC9C,OAAO;MAAEC,KAAK,EAAEF,GAAG,CAACG,OAAO,IAAI;IAA4B,CAAC;EAC9D;EACA,OAAO,MAAM7B,GAAG,CAACQ,IAAI,CAAC,CAAC;AACzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}