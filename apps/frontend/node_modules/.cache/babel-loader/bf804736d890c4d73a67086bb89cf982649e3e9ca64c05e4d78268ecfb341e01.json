{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lahiru deshan\\\\Desktop\\\\CropWise_GitHub\\\\EcoCollect\\\\apps\\\\frontend\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMapEvents } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default markers in react-leaflet\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\n\n// Sample waste collection points for Colombo area municipal councils (accurate coordinates)\nexport const defaultWasteCollectionPoints = [\n// Colombo Municipal Council area\n{\n  id: 1,\n  position: [6.9271, 79.8612],\n  name: \"Colombo Fort\",\n  status: \"completed\",\n  municipalCouncil: \"Colombo Municipal Council\"\n},\n// Dehiwala-Mount Lavinia Municipal Council area  \n{\n  id: 2,\n  position: [6.8459, 79.8631],\n  name: \"Dehiwala Junction\",\n  status: \"completed\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n},\n// Sri Jayawardenapura Kotte Municipal Council area\n{\n  id: 3,\n  position: [6.8906, 79.9015],\n  name: \"Sri Jayawardenapura\",\n  status: \"completed\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n},\n// Kaduwela Municipal Council area\n{\n  id: 4,\n  position: [6.9333, 79.9833],\n  name: \"Kaduwela Town\",\n  status: \"completed\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}];\n\n// Dummy collection points (bins) distributed across roads in each municipal area\nexport const dummyCollectionBins = [\n// Colombo Municipal Council bins (Central Colombo area)\n{\n  id: 'bin-1',\n  position: [6.9271, 79.8612],\n  name: \"Bin 1 - Fort\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-2',\n  position: [6.9311, 79.8678],\n  name: \"Bin 2 - Pettah\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-3',\n  position: [6.9331, 79.8734],\n  name: \"Bin 3 - Maradana\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-4',\n  position: [6.9251, 79.8556],\n  name: \"Bin 4 - Slave Island\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-5',\n  position: [6.9191, 79.8523],\n  name: \"Bin 5 - Kollupitiya\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-6',\n  position: [6.9145, 79.8491],\n  name: \"Bin 6 - Bambalapitiya\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-7',\n  position: [6.9089, 79.8473],\n  name: \"Bin 7 - Wellawatte\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-8',\n  position: [6.9352, 79.8501],\n  name: \"Bin 8 - Kotahena\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-9',\n  position: [6.9421, 79.8623],\n  name: \"Bin 9 - Grandpass\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-10',\n  position: [6.9195, 79.8698],\n  name: \"Bin 10 - Borella\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-11',\n  position: [6.9125, 79.8751],\n  name: \"Bin 11 - Dematagoda\",\n  municipalCouncil: \"Colombo Municipal Council\"\n}, {\n  id: 'bin-12',\n  position: [6.9271, 79.8445],\n  name: \"Bin 12 - Galle Face\",\n  municipalCouncil: \"Colombo Municipal Council\"\n},\n// Dehiwala-Mount Lavinia Municipal Council bins\n{\n  id: 'bin-13',\n  position: [6.8459, 79.8631],\n  name: \"Bin 13 - Dehiwala\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-14',\n  position: [6.8389, 79.8601],\n  name: \"Bin 14 - Mount Lavinia\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-15',\n  position: [6.8529, 79.8671],\n  name: \"Bin 15 - Dehiwala East\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-16',\n  position: [6.8319, 79.8571],\n  name: \"Bin 16 - Ratmalana\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-17',\n  position: [6.8489, 79.8561],\n  name: \"Bin 17 - Beach Road\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-18',\n  position: [6.8559, 79.8611],\n  name: \"Bin 18 - Attidiya\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-19',\n  position: [6.8429, 79.8691],\n  name: \"Bin 19 - Nedimala\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n}, {\n  id: 'bin-20',\n  position: [6.8359, 79.8641],\n  name: \"Bin 20 - Galle Road South\",\n  municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\"\n},\n// Sri Jayawardenapura Kotte Municipal Council bins\n{\n  id: 'bin-21',\n  position: [6.8906, 79.9015],\n  name: \"Bin 21 - Kotte\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-22',\n  position: [6.8976, 79.9085],\n  name: \"Bin 22 - Ethul Kotte\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-23',\n  position: [6.8836, 79.8945],\n  name: \"Bin 23 - Rajagiriya\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-24',\n  position: [6.8766, 79.8875],\n  name: \"Bin 24 - Nawala\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-25',\n  position: [6.8846, 79.9125],\n  name: \"Bin 25 - Madiwela\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-26',\n  position: [6.9046, 79.9155],\n  name: \"Bin 26 - Battaramulla\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-27',\n  position: [6.8906, 79.8915],\n  name: \"Bin 27 - Nugegoda\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n}, {\n  id: 'bin-28',\n  position: [6.8976, 79.8815],\n  name: \"Bin 28 - Koswatte\",\n  municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\"\n},\n// Kaduwela Municipal Council bins\n{\n  id: 'bin-29',\n  position: [6.9333, 79.9833],\n  name: \"Bin 29 - Kaduwela Town\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-30',\n  position: [6.9403, 79.9903],\n  name: \"Bin 30 - Kochchikade\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-31',\n  position: [6.9263, 79.9763],\n  name: \"Bin 31 - Athurugiriya\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-32',\n  position: [6.9193, 79.9693],\n  name: \"Bin 32 - Malabe\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-33',\n  position: [6.9463, 79.9763],\n  name: \"Bin 33 - Welikada\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-34',\n  position: [6.9393, 79.9693],\n  name: \"Bin 34 - Hunupitiya\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-35',\n  position: [6.9333, 79.9973],\n  name: \"Bin 35 - Ranala\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}, {\n  id: 'bin-36',\n  position: [6.9123, 79.9823],\n  name: \"Bin 36 - Hokandara\",\n  municipalCouncil: \"Kaduwela Municipal Council\"\n}];\n\n// Component to handle map clicks\nconst MapClickHandler = ({\n  onMapClick,\n  isRouteCreationMode\n}) => {\n  _s();\n  useMapEvents({\n    click: e => {\n      if (isRouteCreationMode) {\n        onMapClick([e.latlng.lat, e.latlng.lng]);\n      }\n    }\n  });\n  return null;\n};\n\n// Sample optimized route\n_s(MapClickHandler, \"Ld/tk8Iz8AdZhC1l7acENaOEoCo=\", false, function () {\n  return [useMapEvents];\n});\n_c = MapClickHandler;\nconst optimizedRoute = [[6.9271, 79.8612], [6.9311, 79.8678], [6.9331, 79.8734], [6.9251, 79.8556], [6.9191, 79.8523], [6.9271, 79.8612] // Return to start\n];\nconst Map = ({\n  selectedArea = \"Colombo Municipal Council\",\n  isRouteCreationMode = false,\n  selectedPoints = [],\n  onPointClick,\n  generatedRoute = null,\n  showDefaultPoints = true,\n  onRouteGenerated = null\n}) => {\n  _s2();\n  const [roadRoutes, setRoadRoutes] = useState([]);\n  const [isLoadingRoute, setIsLoadingRoute] = useState(false);\n\n  // Center the map on Colombo, Sri Lanka (you can adjust this based on your location)\n  const center = [6.9271, 79.8612];\n  const handleMapClick = useCallback(position => {\n    if (onPointClick) {\n      const newPoint = {\n        id: Date.now(),\n        position,\n        name: `Point ${selectedPoints.length + 1}`,\n        status: 'selected'\n      };\n      onPointClick(newPoint);\n    }\n  }, [onPointClick, selectedPoints.length]);\n\n  // Function to get route between two points using OpenRouteService\n  const getRouteFromAPI = async (start, end) => {\n    try {\n      console.log('Getting route from', start, 'to', end); // Debug log\n\n      // Using OpenRouteService API (free tier)\n      const response = await fetch(`https://api.openrouteservice.org/v2/directions/driving-car/geojson`, {\n        method: 'POST',\n        headers: {\n          'Authorization': '5b3ce3597851110001cf6248a9e13c1b6f104b9b8b25fdf78b70135d',\n          // Free API key\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          coordinates: [[start[1], start[0]], [end[1], end[0]]],\n          // Note: OpenRouteService uses [lng, lat]\n          format: 'geojson'\n        })\n      });\n      if (!response.ok) {\n        console.error('Routing API response not ok:', response.status, response.statusText);\n        throw new Error(`Routing API failed: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('API Response:', data); // Debug log\n\n      if (data.features && data.features.length > 0) {\n        // Convert coordinates back to [lat, lng] format for Leaflet\n        const coordinates = data.features[0].geometry.coordinates.map(coord => [coord[1], coord[0]]);\n        console.log('Generated road coordinates:', coordinates.length, 'points'); // Debug log\n        return coordinates;\n      }\n    } catch (error) {\n      console.warn('Routing API failed, using straight line:', error);\n      // Fallback to straight line if API fails\n      return [start, end];\n    }\n    return [start, end];\n  };\n\n  // Function to generate road-based route for multiple points\n  const generateRoadRoute = async points => {\n    if (points.length < 2) return [];\n    console.log('Starting road route generation for', points.length, 'points'); // Debug log\n    setIsLoadingRoute(true);\n    const routeSegments = [];\n    try {\n      // Get route between each consecutive pair of points\n      for (let i = 0; i < points.length - 1; i++) {\n        const start = points[i].position;\n        const end = points[i + 1].position;\n        console.log(`Getting segment ${i + 1}/${points.length - 1}: from`, start, 'to', end); // Debug log\n\n        const segment = await getRouteFromAPI(start, end);\n\n        // Add the segment, removing the first point if it's not the first segment\n        // to avoid duplicating waypoints\n        if (i === 0) {\n          routeSegments.push(...segment);\n        } else {\n          routeSegments.push(...segment.slice(1));\n        }\n\n        // Small delay to respect API rate limits\n        await new Promise(resolve => setTimeout(resolve, 200));\n      }\n      console.log('Road route generated with', routeSegments.length, 'total points'); // Debug log\n    } catch (error) {\n      console.error('Error generating road route:', error);\n      // Fallback to straight lines between points\n      return points.map(p => p.position);\n    } finally {\n      setIsLoadingRoute(false);\n    }\n    return routeSegments;\n  };\n\n  // Generate road route when points change (automatically)\n  useEffect(() => {\n    if (selectedPoints.length >= 2 && isRouteCreationMode) {\n      // Find the municipal council point for the selected area\n      const municipalPoint = defaultWasteCollectionPoints.find(point => point.municipalCouncil === selectedArea);\n      if (municipalPoint) {\n        // Create route starting and ending at municipal point\n        const startEndPoint = {\n          id: 'municipal-start',\n          position: municipalPoint.position,\n          name: `${municipalPoint.name} (Depot)`\n        };\n\n        // Create full route: depot -> collection points -> depot\n        const fullRoutePoints = [startEndPoint, ...selectedPoints, startEndPoint];\n        generateRoadRoute(fullRoutePoints).then(roadRoute => {\n          setRoadRoutes([roadRoute]);\n          if (onRouteGenerated) {\n            onRouteGenerated(roadRoute);\n          }\n        });\n      } else {\n        // Fallback to original behavior\n        generateRoadRoute(selectedPoints).then(roadRoute => {\n          setRoadRoutes([roadRoute]);\n          if (onRouteGenerated) {\n            onRouteGenerated(roadRoute);\n          }\n        });\n      }\n    } else if (generatedRoute && selectedPoints.length >= 2 && !isRouteCreationMode) {\n      // Show existing route when viewing\n      generateRoadRoute(selectedPoints).then(roadRoute => {\n        setRoadRoutes([roadRoute]);\n        if (onRouteGenerated) {\n          onRouteGenerated(roadRoute);\n        }\n      });\n    } else {\n      setRoadRoutes([]);\n    }\n  }, [selectedPoints, isRouteCreationMode, generatedRoute, onRouteGenerated, selectedArea]);\n  const getMarkerColor = (status, municipalCouncil = null) => {\n    // If in route creation mode, use original logic\n    if (isRouteCreationMode) {\n      switch (status) {\n        case 'completed':\n          return '#10B981';\n        case 'selected':\n          return '#3B82F6';\n        default:\n          return '#F59E0B';\n      }\n    }\n\n    // For default points, check if this point matches the selected area\n    if (municipalCouncil && selectedArea) {\n      if (municipalCouncil === selectedArea) {\n        return '#EF4444'; // Red for selected municipal council\n      } else {\n        return '#6B7280'; // Gray for non-selected municipal councils\n      }\n    }\n\n    // Fallback to original logic\n    switch (status) {\n      case 'completed':\n        return '#10B981';\n      case 'selected':\n        return '#3B82F6';\n      default:\n        return '#F59E0B';\n    }\n  };\n  const createCustomIcon = (status, municipalCouncil = null) => {\n    const color = getMarkerColor(status, municipalCouncil);\n    const size = status === 'selected' ? 24 : 20;\n    return L.divIcon({\n      className: 'custom-div-icon',\n      html: `<div style=\"background-color: ${color}; width: ${size}px; height: ${size}px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>`,\n      iconSize: [size, size],\n      iconAnchor: [size / 2, size / 2]\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-full rounded-lg overflow-hidden relative\",\n    children: [isRouteCreationMode && (() => {\n      const municipalPoint = defaultWasteCollectionPoints.find(point => point.municipalCouncil === selectedArea);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-4 left-4 bg-blue-500 text-white px-3 py-2 rounded-lg shadow-md z-1000\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm font-medium\",\n          children: \"Click on map to add collection points\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs opacity-90\",\n          children: [\"Route will start/end at \", (municipalPoint === null || municipalPoint === void 0 ? void 0 : municipalPoint.name) || 'depot']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this);\n    })(), /*#__PURE__*/_jsxDEV(MapContainer, {\n      center: center,\n      zoom: 13,\n      style: {\n        height: '100%',\n        width: '100%'\n      },\n      className: \"rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MapClickHandler, {\n        onMapClick: handleMapClick,\n        isRouteCreationMode: isRouteCreationMode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), showDefaultPoints && defaultWasteCollectionPoints.map(point => /*#__PURE__*/_jsxDEV(Marker, {\n        position: point.position,\n        icon: createCustomIcon(point.status, point.municipalCouncil),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold\",\n              children: point.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mb-1\",\n              children: point.municipalCouncil\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: `text-sm ${point.municipalCouncil === selectedArea ? 'text-red-600 font-semibold' : 'text-gray-500'}`,\n              children: point.municipalCouncil === selectedArea ? 'Selected Area' : 'Available'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this)\n      }, point.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this)), showDefaultPoints && !isRouteCreationMode && dummyCollectionBins.filter(bin => bin.municipalCouncil === selectedArea).map(bin => {\n        const binIcon = L.divIcon({\n          className: 'custom-bin-icon',\n          html: `<div style=\"background-color: #10B981; width: 8px; height: 8px; border-radius: 50%; border: 1px solid white; box-shadow: 0 1px 2px rgba(0,0,0,0.3);\"></div>`,\n          iconSize: [8, 8],\n          iconAnchor: [4, 4]\n        });\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: bin.position,\n          icon: binIcon,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-sm\",\n                children: [\"\\uD83D\\uDDD1\\uFE0F \", bin.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs text-gray-600\",\n                children: \"Collection Point\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 17\n          }, this)\n        }, bin.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 15\n        }, this);\n      }), isRouteCreationMode && (() => {\n        const municipalPoint = defaultWasteCollectionPoints.find(point => point.municipalCouncil === selectedArea);\n        if (municipalPoint) {\n          const depotIcon = L.divIcon({\n            className: 'custom-div-icon',\n            html: `<div style=\"background-color: #059669; width: 28px; height: 28px; border-radius: 50%; border: 4px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.4); position: relative;\">\n                       <div style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 12px; font-weight: bold;\">D</div>\n                     </div>`,\n            iconSize: [28, 28],\n            iconAnchor: [14, 14]\n          });\n          return /*#__PURE__*/_jsxDEV(Marker, {\n            position: municipalPoint.position,\n            icon: depotIcon,\n            children: /*#__PURE__*/_jsxDEV(Popup, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"font-semibold text-green-700\",\n                  children: \"\\uD83D\\uDE9B Depot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium\",\n                  children: municipalPoint.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-gray-600\",\n                  children: \"Start & End Point\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 17\n            }, this)\n          }, \"depot-marker\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this);\n        }\n        return null;\n      })(), selectedPoints.map((point, index) => /*#__PURE__*/_jsxDEV(Marker, {\n        position: point.position,\n        icon: createCustomIcon(point.status),\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold\",\n              children: point.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-600\",\n              children: [\"Order: \", index + 1]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"mt-2 px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\",\n              onClick: () => onPointClick && onPointClick(point, 'remove'),\n              children: \"Remove\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this)\n      }, point.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this)), roadRoutes.map((route, index) => /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: route,\n        pathOptions: {\n          color: '#059669',\n          weight: 5,\n          opacity: 0.8\n        }\n      }, `road-route-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 11\n      }, this)), isLoadingRoute && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-3 rounded-lg shadow-lg z-1000\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-spin rounded-full h-4 w-4 border-b-2 border-emerald-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm\",\n            children: \"Generating road route...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-4 left-4 bg-white p-3 rounded-lg shadow-md z-1000\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-sm font-semibold mb-2\",\n        children: \"Legend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1\",\n        children: [showDefaultPoints && !isRouteCreationMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-red-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Selected Municipal Council\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-gray-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Other Municipal Councils\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-green-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Collection Bins\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), showDefaultPoints && isRouteCreationMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-yellow-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Pending Collection\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-green-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Completed\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), isRouteCreationMode && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-4 h-4 bg-green-600 rounded-full flex items-center justify-center\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-white text-xs font-bold\",\n                children: \"D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Depot (Start/End)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-blue-500 rounded-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs\",\n              children: \"Collection Points\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), generatedRoute && roadRoutes.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-4 h-1 bg-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs\",\n            children: \"Road Route\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 290,\n    columnNumber: 5\n  }, this);\n};\n_s2(Map, \"is53O3hmwZEG+cfoDebmOEY4/hA=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"MapClickHandler\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","MapContainer","TileLayer","Marker","Popup","Polyline","useMapEvents","L","jsxDEV","_jsxDEV","Fragment","_Fragment","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","defaultWasteCollectionPoints","id","position","name","status","municipalCouncil","dummyCollectionBins","MapClickHandler","onMapClick","isRouteCreationMode","_s","click","e","latlng","lat","lng","_c","optimizedRoute","Map","selectedArea","selectedPoints","onPointClick","generatedRoute","showDefaultPoints","onRouteGenerated","_s2","roadRoutes","setRoadRoutes","isLoadingRoute","setIsLoadingRoute","center","handleMapClick","newPoint","Date","now","length","getRouteFromAPI","start","end","console","log","response","fetch","method","headers","body","JSON","stringify","coordinates","format","ok","error","statusText","Error","data","json","features","geometry","map","coord","warn","generateRoadRoute","points","routeSegments","i","segment","push","slice","Promise","resolve","setTimeout","p","municipalPoint","find","point","startEndPoint","fullRoutePoints","then","roadRoute","getMarkerColor","createCustomIcon","color","size","divIcon","className","html","iconSize","iconAnchor","children","fileName","_jsxFileName","lineNumber","columnNumber","zoom","style","height","width","attribution","url","icon","filter","bin","binIcon","depotIcon","index","onClick","route","positions","pathOptions","weight","opacity","_c2","$RefreshReg$"],"sources":["C:/Users/lahiru deshan/Desktop/CropWise_GitHub/EcoCollect/apps/frontend/src/components/Map.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup, Polyline, useMapEvents } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default markers in react-leaflet\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\n// Sample waste collection points for Colombo area municipal councils (accurate coordinates)\r\nexport const defaultWasteCollectionPoints = [\r\n  // Colombo Municipal Council area\r\n  { id: 1, position: [6.9271, 79.8612], name: \"Colombo Fort\", status: \"completed\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  // Dehiwala-Mount Lavinia Municipal Council area  \r\n  { id: 2, position: [6.8459, 79.8631], name: \"Dehiwala Junction\", status: \"completed\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  // Sri Jayawardenapura Kotte Municipal Council area\r\n  { id: 3, position: [6.8906, 79.9015], name: \"Sri Jayawardenapura\", status: \"completed\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  // Kaduwela Municipal Council area\r\n  { id: 4, position: [6.9333, 79.9833], name: \"Kaduwela Town\", status: \"completed\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n];\r\n\r\n// Dummy collection points (bins) distributed across roads in each municipal area\r\nexport const dummyCollectionBins = [\r\n  // Colombo Municipal Council bins (Central Colombo area)\r\n  { id: 'bin-1', position: [6.9271, 79.8612], name: \"Bin 1 - Fort\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-2', position: [6.9311, 79.8678], name: \"Bin 2 - Pettah\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-3', position: [6.9331, 79.8734], name: \"Bin 3 - Maradana\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-4', position: [6.9251, 79.8556], name: \"Bin 4 - Slave Island\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-5', position: [6.9191, 79.8523], name: \"Bin 5 - Kollupitiya\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-6', position: [6.9145, 79.8491], name: \"Bin 6 - Bambalapitiya\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-7', position: [6.9089, 79.8473], name: \"Bin 7 - Wellawatte\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-8', position: [6.9352, 79.8501], name: \"Bin 8 - Kotahena\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-9', position: [6.9421, 79.8623], name: \"Bin 9 - Grandpass\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-10', position: [6.9195, 79.8698], name: \"Bin 10 - Borella\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-11', position: [6.9125, 79.8751], name: \"Bin 11 - Dematagoda\", municipalCouncil: \"Colombo Municipal Council\" },\r\n  { id: 'bin-12', position: [6.9271, 79.8445], name: \"Bin 12 - Galle Face\", municipalCouncil: \"Colombo Municipal Council\" },\r\n\r\n  // Dehiwala-Mount Lavinia Municipal Council bins\r\n  { id: 'bin-13', position: [6.8459, 79.8631], name: \"Bin 13 - Dehiwala\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-14', position: [6.8389, 79.8601], name: \"Bin 14 - Mount Lavinia\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-15', position: [6.8529, 79.8671], name: \"Bin 15 - Dehiwala East\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-16', position: [6.8319, 79.8571], name: \"Bin 16 - Ratmalana\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-17', position: [6.8489, 79.8561], name: \"Bin 17 - Beach Road\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-18', position: [6.8559, 79.8611], name: \"Bin 18 - Attidiya\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-19', position: [6.8429, 79.8691], name: \"Bin 19 - Nedimala\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n  { id: 'bin-20', position: [6.8359, 79.8641], name: \"Bin 20 - Galle Road South\", municipalCouncil: \"Dehiwala-Mount Lavinia Municipal Council\" },\r\n\r\n  // Sri Jayawardenapura Kotte Municipal Council bins\r\n  { id: 'bin-21', position: [6.8906, 79.9015], name: \"Bin 21 - Kotte\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-22', position: [6.8976, 79.9085], name: \"Bin 22 - Ethul Kotte\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-23', position: [6.8836, 79.8945], name: \"Bin 23 - Rajagiriya\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-24', position: [6.8766, 79.8875], name: \"Bin 24 - Nawala\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-25', position: [6.8846, 79.9125], name: \"Bin 25 - Madiwela\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-26', position: [6.9046, 79.9155], name: \"Bin 26 - Battaramulla\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-27', position: [6.8906, 79.8915], name: \"Bin 27 - Nugegoda\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n  { id: 'bin-28', position: [6.8976, 79.8815], name: \"Bin 28 - Koswatte\", municipalCouncil: \"Sri Jayawardenapura Kotte Municipal Council\" },\r\n\r\n  // Kaduwela Municipal Council bins\r\n  { id: 'bin-29', position: [6.9333, 79.9833], name: \"Bin 29 - Kaduwela Town\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-30', position: [6.9403, 79.9903], name: \"Bin 30 - Kochchikade\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-31', position: [6.9263, 79.9763], name: \"Bin 31 - Athurugiriya\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-32', position: [6.9193, 79.9693], name: \"Bin 32 - Malabe\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-33', position: [6.9463, 79.9763], name: \"Bin 33 - Welikada\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-34', position: [6.9393, 79.9693], name: \"Bin 34 - Hunupitiya\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-35', position: [6.9333, 79.9973], name: \"Bin 35 - Ranala\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n  { id: 'bin-36', position: [6.9123, 79.9823], name: \"Bin 36 - Hokandara\", municipalCouncil: \"Kaduwela Municipal Council\" },\r\n];\r\n\r\n// Component to handle map clicks\r\nconst MapClickHandler = ({ onMapClick, isRouteCreationMode }) => {\r\n  useMapEvents({\r\n    click: (e) => {\r\n      if (isRouteCreationMode) {\r\n        onMapClick([e.latlng.lat, e.latlng.lng]);\r\n      }\r\n    },\r\n  });\r\n  return null;\r\n};\r\n\r\n// Sample optimized route\r\nconst optimizedRoute = [\r\n  [6.9271, 79.8612],\r\n  [6.9311, 79.8678],\r\n  [6.9331, 79.8734],\r\n  [6.9251, 79.8556],\r\n  [6.9191, 79.8523],\r\n  [6.9271, 79.8612], // Return to start\r\n];\r\n\r\nconst Map = ({ \r\n  selectedArea = \"Colombo Municipal Council\", \r\n  isRouteCreationMode = false, \r\n  selectedPoints = [], \r\n  onPointClick, \r\n  generatedRoute = null,\r\n  showDefaultPoints = true,\r\n  onRouteGenerated = null \r\n}) => {\r\n  const [roadRoutes, setRoadRoutes] = useState([]);\r\n  const [isLoadingRoute, setIsLoadingRoute] = useState(false);\r\n  \r\n  // Center the map on Colombo, Sri Lanka (you can adjust this based on your location)\r\n  const center = [6.9271, 79.8612];\r\n\r\n  const handleMapClick = useCallback((position) => {\r\n    if (onPointClick) {\r\n      const newPoint = {\r\n        id: Date.now(),\r\n        position,\r\n        name: `Point ${selectedPoints.length + 1}`,\r\n        status: 'selected'\r\n      };\r\n      onPointClick(newPoint);\r\n    }\r\n  }, [onPointClick, selectedPoints.length]);\r\n\r\n  // Function to get route between two points using OpenRouteService\r\n  const getRouteFromAPI = async (start, end) => {\r\n    try {\r\n      console.log('Getting route from', start, 'to', end); // Debug log\r\n      \r\n      // Using OpenRouteService API (free tier)\r\n      const response = await fetch(`https://api.openrouteservice.org/v2/directions/driving-car/geojson`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': '5b3ce3597851110001cf6248a9e13c1b6f104b9b8b25fdf78b70135d', // Free API key\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          coordinates: [[start[1], start[0]], [end[1], end[0]]], // Note: OpenRouteService uses [lng, lat]\r\n          format: 'geojson'\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        console.error('Routing API response not ok:', response.status, response.statusText);\r\n        throw new Error(`Routing API failed: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('API Response:', data); // Debug log\r\n      \r\n      if (data.features && data.features.length > 0) {\r\n        // Convert coordinates back to [lat, lng] format for Leaflet\r\n        const coordinates = data.features[0].geometry.coordinates.map(coord => [coord[1], coord[0]]);\r\n        console.log('Generated road coordinates:', coordinates.length, 'points'); // Debug log\r\n        return coordinates;\r\n      }\r\n    } catch (error) {\r\n      console.warn('Routing API failed, using straight line:', error);\r\n      // Fallback to straight line if API fails\r\n      return [start, end];\r\n    }\r\n    return [start, end];\r\n  };\r\n\r\n  // Function to generate road-based route for multiple points\r\n  const generateRoadRoute = async (points) => {\r\n    if (points.length < 2) return [];\r\n    \r\n    console.log('Starting road route generation for', points.length, 'points'); // Debug log\r\n    setIsLoadingRoute(true);\r\n    const routeSegments = [];\r\n    \r\n    try {\r\n      // Get route between each consecutive pair of points\r\n      for (let i = 0; i < points.length - 1; i++) {\r\n        const start = points[i].position;\r\n        const end = points[i + 1].position;\r\n        \r\n        console.log(`Getting segment ${i + 1}/${points.length - 1}: from`, start, 'to', end); // Debug log\r\n        \r\n        const segment = await getRouteFromAPI(start, end);\r\n        \r\n        // Add the segment, removing the first point if it's not the first segment\r\n        // to avoid duplicating waypoints\r\n        if (i === 0) {\r\n          routeSegments.push(...segment);\r\n        } else {\r\n          routeSegments.push(...segment.slice(1));\r\n        }\r\n        \r\n        // Small delay to respect API rate limits\r\n        await new Promise(resolve => setTimeout(resolve, 200));\r\n      }\r\n      \r\n      console.log('Road route generated with', routeSegments.length, 'total points'); // Debug log\r\n    } catch (error) {\r\n      console.error('Error generating road route:', error);\r\n      // Fallback to straight lines between points\r\n      return points.map(p => p.position);\r\n    } finally {\r\n      setIsLoadingRoute(false);\r\n    }\r\n    \r\n    return routeSegments;\r\n  };\r\n\r\n  // Generate road route when points change (automatically)\r\n  useEffect(() => {\r\n    if (selectedPoints.length >= 2 && isRouteCreationMode) {\r\n      // Find the municipal council point for the selected area\r\n      const municipalPoint = defaultWasteCollectionPoints.find(\r\n        point => point.municipalCouncil === selectedArea\r\n      );\r\n      \r\n      if (municipalPoint) {\r\n        // Create route starting and ending at municipal point\r\n        const startEndPoint = { \r\n          id: 'municipal-start', \r\n          position: municipalPoint.position, \r\n          name: `${municipalPoint.name} (Depot)` \r\n        };\r\n        \r\n        // Create full route: depot -> collection points -> depot\r\n        const fullRoutePoints = [startEndPoint, ...selectedPoints, startEndPoint];\r\n        \r\n        generateRoadRoute(fullRoutePoints).then(roadRoute => {\r\n          setRoadRoutes([roadRoute]);\r\n          if (onRouteGenerated) {\r\n            onRouteGenerated(roadRoute);\r\n          }\r\n        });\r\n      } else {\r\n        // Fallback to original behavior\r\n        generateRoadRoute(selectedPoints).then(roadRoute => {\r\n          setRoadRoutes([roadRoute]);\r\n          if (onRouteGenerated) {\r\n            onRouteGenerated(roadRoute);\r\n          }\r\n        });\r\n      }\r\n    } else if (generatedRoute && selectedPoints.length >= 2 && !isRouteCreationMode) {\r\n      // Show existing route when viewing\r\n      generateRoadRoute(selectedPoints).then(roadRoute => {\r\n        setRoadRoutes([roadRoute]);\r\n        if (onRouteGenerated) {\r\n          onRouteGenerated(roadRoute);\r\n        }\r\n      });\r\n    } else {\r\n      setRoadRoutes([]);\r\n    }\r\n  }, [selectedPoints, isRouteCreationMode, generatedRoute, onRouteGenerated, selectedArea]);\r\n\r\n  const getMarkerColor = (status, municipalCouncil = null) => {\r\n    // If in route creation mode, use original logic\r\n    if (isRouteCreationMode) {\r\n      switch (status) {\r\n        case 'completed': return '#10B981';\r\n        case 'selected': return '#3B82F6';\r\n        default: return '#F59E0B';\r\n      }\r\n    }\r\n    \r\n    // For default points, check if this point matches the selected area\r\n    if (municipalCouncil && selectedArea) {\r\n      if (municipalCouncil === selectedArea) {\r\n        return '#EF4444'; // Red for selected municipal council\r\n      } else {\r\n        return '#6B7280'; // Gray for non-selected municipal councils\r\n      }\r\n    }\r\n    \r\n    // Fallback to original logic\r\n    switch (status) {\r\n      case 'completed': return '#10B981';\r\n      case 'selected': return '#3B82F6';\r\n      default: return '#F59E0B';\r\n    }\r\n  };\r\n\r\n  const createCustomIcon = (status, municipalCouncil = null) => {\r\n    const color = getMarkerColor(status, municipalCouncil);\r\n    const size = status === 'selected' ? 24 : 20;\r\n    return L.divIcon({\r\n      className: 'custom-div-icon',\r\n      html: `<div style=\"background-color: ${color}; width: ${size}px; height: ${size}px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);\"></div>`,\r\n      iconSize: [size, size],\r\n      iconAnchor: [size/2, size/2],\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"h-full rounded-lg overflow-hidden relative\">\r\n      {isRouteCreationMode && (() => {\r\n        const municipalPoint = defaultWasteCollectionPoints.find(\r\n          point => point.municipalCouncil === selectedArea\r\n        );\r\n        \r\n        return (\r\n          <div className=\"absolute top-4 left-4 bg-blue-500 text-white px-3 py-2 rounded-lg shadow-md z-1000\">\r\n            <p className=\"text-sm font-medium\">Click on map to add collection points</p>\r\n            <p className=\"text-xs opacity-90\">Route will start/end at {municipalPoint?.name || 'depot'}</p>\r\n          </div>\r\n        );\r\n      })()}\r\n      \r\n      <MapContainer\r\n        center={center}\r\n        zoom={13}\r\n        style={{ height: '100%', width: '100%' }}\r\n        className=\"rounded-lg\"\r\n      >\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        \r\n        <MapClickHandler \r\n          onMapClick={handleMapClick} \r\n          isRouteCreationMode={isRouteCreationMode} \r\n        />\r\n        \r\n        {/* Render default waste collection points */}\r\n        {showDefaultPoints && defaultWasteCollectionPoints.map((point) => (\r\n          <Marker\r\n            key={point.id}\r\n            position={point.position}\r\n            icon={createCustomIcon(point.status, point.municipalCouncil)}\r\n          >\r\n            <Popup>\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-semibold\">{point.name}</h3>\r\n                <p className=\"text-xs text-gray-600 mb-1\">{point.municipalCouncil}</p>\r\n                <p className={`text-sm ${\r\n                  point.municipalCouncil === selectedArea \r\n                    ? 'text-red-600 font-semibold' \r\n                    : 'text-gray-500'\r\n                }`}>\r\n                  {point.municipalCouncil === selectedArea ? 'Selected Area' : 'Available'}\r\n                </p>\r\n              </div>\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n\r\n        {/* Render dummy collection bins as small dots */}\r\n        {showDefaultPoints && !isRouteCreationMode && dummyCollectionBins\r\n          .filter(bin => bin.municipalCouncil === selectedArea)\r\n          .map((bin) => {\r\n            const binIcon = L.divIcon({\r\n              className: 'custom-bin-icon',\r\n              html: `<div style=\"background-color: #10B981; width: 8px; height: 8px; border-radius: 50%; border: 1px solid white; box-shadow: 0 1px 2px rgba(0,0,0,0.3);\"></div>`,\r\n              iconSize: [8, 8],\r\n              iconAnchor: [4, 4],\r\n            });\r\n            \r\n            return (\r\n              <Marker\r\n                key={bin.id}\r\n                position={bin.position}\r\n                icon={binIcon}\r\n              >\r\n                <Popup>\r\n                  <div className=\"text-center\">\r\n                    <h3 className=\"font-semibold text-sm\"> {bin.name}</h3>\r\n                    <p className=\"text-xs text-gray-600\">Collection Point</p>\r\n                  </div>\r\n                </Popup>\r\n              </Marker>\r\n            );\r\n          })}\r\n\r\n        {/* Render depot marker when in route creation mode */}\r\n        {isRouteCreationMode && (() => {\r\n          const municipalPoint = defaultWasteCollectionPoints.find(\r\n            point => point.municipalCouncil === selectedArea\r\n          );\r\n          \r\n          if (municipalPoint) {\r\n            const depotIcon = L.divIcon({\r\n              className: 'custom-div-icon',\r\n              html: `<div style=\"background-color: #059669; width: 28px; height: 28px; border-radius: 50%; border: 4px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.4); position: relative;\">\r\n                       <div style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 12px; font-weight: bold;\">D</div>\r\n                     </div>`,\r\n              iconSize: [28, 28],\r\n              iconAnchor: [14, 14],\r\n            });\r\n            \r\n            return (\r\n              <Marker\r\n                key=\"depot-marker\"\r\n                position={municipalPoint.position}\r\n                icon={depotIcon}\r\n              >\r\n                <Popup>\r\n                  <div className=\"text-center\">\r\n                    <h3 className=\"font-semibold text-green-700\"> Depot</h3>\r\n                    <p className=\"text-sm font-medium\">{municipalPoint.name}</p>\r\n                    <p className=\"text-xs text-gray-600\">Start & End Point</p>\r\n                  </div>\r\n                </Popup>\r\n              </Marker>\r\n            );\r\n          }\r\n          return null;\r\n        })()}\r\n\r\n        {/* Render selected points for route creation */}\r\n        {selectedPoints.map((point, index) => (\r\n          <Marker\r\n            key={point.id}\r\n            position={point.position}\r\n            icon={createCustomIcon(point.status)}\r\n          >\r\n            <Popup>\r\n              <div className=\"text-center\">\r\n                <h3 className=\"font-semibold\">{point.name}</h3>\r\n                <p className=\"text-sm text-blue-600\">\r\n                  Order: {index + 1}\r\n                </p>\r\n                <button \r\n                  className=\"mt-2 px-3 py-1 bg-red-500 text-white text-xs rounded hover:bg-red-600\"\r\n                  onClick={() => onPointClick && onPointClick(point, 'remove')}\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </Popup>\r\n          </Marker>\r\n        ))}\r\n\r\n        {/* Render generated route using road routing */}\r\n        {roadRoutes.map((route, index) => (\r\n          <Polyline\r\n            key={`road-route-${index}`}\r\n            positions={route}\r\n            pathOptions={{\r\n              color: '#059669',\r\n              weight: 5,\r\n              opacity: 0.8,\r\n            }}\r\n          />\r\n        ))}\r\n\r\n        {/* Show loading indicator for route generation */}\r\n        {isLoadingRoute && (\r\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-3 rounded-lg shadow-lg z-1000\">\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-emerald-600\"></div>\r\n              <span className=\"text-sm\">Generating road route...</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </MapContainer>\r\n      \r\n      {/* Legend */}\r\n      <div className=\"absolute bottom-4 left-4 bg-white p-3 rounded-lg shadow-md z-1000\">\r\n        <h4 className=\"text-sm font-semibold mb-2\">Legend</h4>\r\n        <div className=\"space-y-1\">\r\n          {showDefaultPoints && !isRouteCreationMode && (\r\n            <>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Selected Municipal Council</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-gray-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Other Municipal Councils</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Collection Bins</span>\r\n              </div>\r\n            </>\r\n          )}\r\n          {showDefaultPoints && isRouteCreationMode && (\r\n            <>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Pending Collection</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Completed</span>\r\n              </div>\r\n            </>\r\n          )}\r\n          {isRouteCreationMode && (\r\n            <>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-4 h-4 bg-green-600 rounded-full flex items-center justify-center\">\r\n                  <span className=\"text-white text-xs font-bold\">D</span>\r\n                </div>\r\n                <span className=\"text-xs\">Depot (Start/End)</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\r\n                <span className=\"text-xs\">Collection Points</span>\r\n              </div>\r\n            </>\r\n          )}\r\n          {generatedRoute && roadRoutes.length > 0 && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <div className=\"w-4 h-1 bg-green-600\"></div>\r\n              <span className=\"text-xs\">Road Route</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Map;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}